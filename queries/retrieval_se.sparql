## run with
## slm-run --config config.ini -f queries/retrieval_se.sparql --debug
##
PREFIX ex: <http://example.org/>

SELECT ?uri ?price WHERE {

    BIND(ex:SLM-RETRIEVAL_SE("Abonnement Tv",5) AS ?retrieval_graph)
    GRAPH ?retrieval_graph {
    ?uri <http://example.org/has_uri> ?page .
    }

    BIND(ex:SLM-LLMGRAPH_OLLA(CONCAT("""if the text contains a tv subscription, generate in JSON-LD a
                schema.org representation for a type offer of : <page>""",
                STR(?page), "</page>. Output only JSON-LD"),?uri) AS ?g)
    GRAPH ?g {?uri <http://example.org/has_schema_type> ?root .
              ?root a <http://schema.org/Offer> .
              ?root <http://schema.org/price> ?price
    }

}